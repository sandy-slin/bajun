# 项目需求文档

## 项目概述
A股分析系统，提供股票和板块的全面分析功能，支持真实数据获取和AI分析。

## 功能需求

### ✅ 已完成功能

#### 1. 股票分析功能
- [x] 股票数据获取（支持akshare真实数据）
- [x] LLM智能分析（DeepSeek API）
- [x] 技术分析（RSI、MACD、移动平均线等）
- [x] 投资建议生成
- [x] 报告自动生成和保存

#### 2. 板块分析功能
- [x] 板块列表显示（31个申万一级行业）
- [x] 板块数据获取（真实申万指数数据）
- [x] 板块筛选系统（Top N推荐）
- [x] 单板块详细分析
- [x] 板块摘要功能
- [x] 板块轮动分析
- [x] 板块间相关性分析
- [x] 市场阶段判断（牛市/熊市/震荡市）

#### 3. 技术特性
- [x] 多维度评分体系（技术面、资金流向、基本面、轮动周期）
- [x] 智能缓存系统（支持DataFrame序列化）
- [x] 错误处理和重试机制
- [x] 详细日志记录
- [x] 命令行接口（CLI）

### 🔧 技术架构

#### 数据层
- **数据源**: AKShare（申万行业指数、个股数据）
- **缓存系统**: 文件缓存，支持pickle和JSON格式
- **数据质量**: 完整性检查、类型转换、异常处理

#### 分析层
- **评分算法**: 加权综合评分，多维度分析
- **轮动分析**: 领涨/领跌板块识别，轮动机会挖掘
- **相关性分析**: 板块间相关性矩阵计算
- **市场判断**: 基于板块表现的宏观市场阶段判断

#### 报告层
- **格式**: Markdown格式，支持中文
- **内容**: 技术分析、投资建议、风险提示
- **存储**: 时间戳命名，自动分类存储

### 📊 板块功能详细说明

#### 板块筛选
- 支持自定义Top N数量
- 多维度综合评分
- 自动生成筛选报告
- 包含轮动分析和相关性分析

#### 单板块分析
- 价格走势分析（支撑位、阻力位）
- 技术指标计算（RSI、MACD、均线）
- 个股表现分析（领涨股、领跌股）
- 成交量和资金流向分析
- 未来预测和投资建议

#### 轮动分析
- 市场阶段判断（牛市/熊市/震荡市）
- 领涨板块识别（前30%）
- 领跌板块识别（后30%）
- 轮动机会挖掘（中等强度板块）

### 🚀 使用方法

```bash
# 环境设置
./setup.sh

# 板块相关功能
./run.sh --list-sectors                    # 查看支持的板块
./run.sh --sector-screening --top-n 5     # 板块筛选（Top 5）
./run.sh --sector-analysis 银行           # 单板块分析
./run.sh --sector-summary 医药生物        # 板块摘要

# 股票分析功能
./run.sh --stock 000001                   # 分析特定股票
./run.sh --verbose                        # 详细输出模式
```

### 📈 数据来源

- **申万一级行业指数**: 使用AKShare的`index_analysis_daily_sw` API
- **技术指标**: 基于真实价格数据计算
- **评分算法**: 自主研发的多维度评分体系
- **轮动分析**: 基于20日相对强弱指标

### 🎯 投资价值

1. **数据驱动**: 基于真实市场数据，非模拟数据
2. **多维度分析**: 技术面、资金面、基本面、轮动周期全面覆盖
3. **轮动机会**: 识别板块轮动规律，把握投资时机
4. **风险控制**: 综合评分体系，帮助控制投资风险
5. **专业报告**: 自动生成专业分析报告，支持投资决策

## 更新记录

- **2025-08-15**: 完成板块功能开发，包括轮动分析和相关性分析
- **2025-08-15**: 集成真实数据获取，使用AKShare API
- **2025-08-15**: 完善缓存系统和错误处理机制
- **2025-08-15**: 优化报告生成和格式化功能

## 下一步计划

- [ ] 添加更多技术指标（布林带、KDJ等）
- [ ] 集成新闻事件分析
- [ ] 支持自定义评分权重
- [ ] 添加历史回测功能
- [ ] 开发Web界面